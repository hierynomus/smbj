dist: trusty
sudo: false

before_cache:
  - rm -f $HOME/.gradle/caches/modules-2/modules-2.lock
  - rm -fr $HOME/.gradle/caches/*/plugin-resolution/

cache:
  directories:
  - $HOME/.gradle/caches/
  - $HOME/.gradle/wrapper/
  - $HOME/.android/build-cache

matrix:
  include:
    - language: java
      jdk: oraclejdk8
      before_install:
        - pip install --user codecov
      after_success:
        - codecov
    - language: java
      jdk: openjdk8
    - language: java
      jdk: oraclejdk9
    - language: android
      android:
        components:
          - build-tools-27.0.3
          - android-24
          - extra
      script: ./gradlew --build-file build-android.gradle build
